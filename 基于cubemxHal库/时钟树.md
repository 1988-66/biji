1、设置时钟源
2、设置系统时钟 SYSCLK
3、设置 AHB 分频因子（决定 HCLK 等于多少）
4、设置 APB2 分频因子（决定 PCLK2等于多少）
5、设置 APB1 分频因子（决定 PCLK1 等于多少）
6、设置各个外设的分频因子；
7、最终达到对于 SYSCLK、HCLK、 PCLK2、 PCLK1 这四个时钟的配置。
## 简单创建一个CubeMX工程（STMF103常用）

CubeMX配置：

**①开启外部高速时钟**（内部 HSI 的精度较差（误差通常 ±1% 以上），而外部晶振的精度能到 ±20ppm 级别，适合需要精准定时、通信（如 UART 波特率、I2C/SPI 时序）的场景。）
![[Pasted image 20260105212212.png]]
**②设置SYS的Debug为Serial Wire**（在 CubeMX 中把 Debug 模式设为 Serial Wire，会自动在生成的代码里**保留 SWD 调试接口的功能**（强制让 PA13/SWIO、PA14/SWCLK 这两个引脚作为调试引脚，不被当作普通 IO 口），避免调试接口被意外禁用，从而防止后续调试 / 下载时出现 “连不上芯片” 的自锁问题。）
![[Pasted image 20260105212342.png]]

**③配置时钟树（荐最高主频72Mhz）**

![[Pasted image 20260105212808.png]]
**④工程相关配置**


![[Pasted image 20260107095302.png]]
![[Pasted image 20260107095339.png]]