1.
PWM 最优参数：F103（PSC=71，ARR=19999）、F407（PSC=83，ARR=19999），编码器固定（PSC=0，ARR=65535）；
2.
四驱小车的 4 路 PWM 建议使用同一个定时器的不同通道（或同总线的定时器），保证 PWM 频率一致，电机转速同步性更好。
3.
占空比 = CCRx / (ARR+1)，如果使用Motor_SetSpeedD（i)，ARR=19999，i的范围在4000以上，占空比为20%，最小启动。
4.
## 二、修改方案：将 F407 代码改为与 F103 相同的 PSC/ARR 逻辑

### 核心目标：复刻 F103 的逻辑 ——**1μs 计数精度、20ms PWM 周期**，基于 F407 的 TIM3 时钟（84MHz）推导参数

#### 步骤 1：推导 F407 对应的 PSC 和 ARR 值

- 目标 1：计数精度 1μs（每计数 1 次耗时 1μs），即计数频率 = 1MHz
- 目标 2：PWM 周期 20ms=20000μs，即需要计数 20000 次
- 计算公式：
    1. 预分频器`PSC`：`PSC = (定时器时钟频率 / 目标计数频率) - 1`
        
        代入数值：`PSC = (84MHz / 1MHz) - 1 = 84 - 1 = 83`
    2. 自动重装载值`ARR`：`ARR = (目标PWM周期 / 单个计数周期) - 1`
        
        代入数值：`ARR = (20000μs / 1μs) - 1 = 20000 - 1 = 19999`（与 F103 的 ARR 值完全一致）

