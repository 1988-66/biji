1.1.
STM32F1 的计算 (72MHz 主频)
在 STM32F1 中，APB1 总线的最大频率是 36MHz。定时器 TIM2 挂载在 APB1 总线上。
系统主频 (SYSCLK): 72 MHz
APB1 预分频: 2 (72MHz / 2 = 36MHz)
定时器时钟源: 当 APB1 预分频系数不为 1 时，定时器时钟会乘 2。
TIM2 时钟频率: 36MHz * 2 = 72MHz
预分频器 (PSC): 720 - 1
计数器时钟频率: 72,000,000 / 720 = 100,000 Hz (即 100kHz)
自动重装载值 (ARR): 100 - 1
中断周期: 100 / 100,000 = 0.001 秒 (即 1 毫秒)
12. STM32F4 的计算 (168MHz 主频)
在 STM32F4 中，APB1 总线的最大频率是 42MHz。定时器 TIM2 同样挂载在 APB1 总线上。
系统主频 (SYSCLK): 168 MHz
APB1 预分频: 4 (168MHz / 4 = 42MHz)
定时器时钟源: 当 APB1 预分频系数不为 1 时，定时器时钟会乘 2。
TIM2 时钟频率: 42MHz * 2 = 84MHz
目标: 保持 1 毫秒 的中断周期。
计数器时钟频率: 100 / 0.001 = 100,000 Hz (我们需要保持 100kHz)
新的预分频器 (PSC): 84,000,000 / 100,000 = 840
所以 PSC 的值应该是: 840 - 1
2.
定时器的时钟来源通常是 APB 总线时钟（F4 的 APB1 默认最大 42MHz，APB2 默认最大 84MHz），但注意：

- 若 APB 总线预分频系数≠1，定时器时钟会自动 ×2（例如 APB1 预分频 = 2 时，TIM2/3/4 的时钟 = 42MHz×2=84MHz）。