1.iic PB6-SCL，PB7-SDA
2.
![[Pasted image 20260116205909.png]]
3.
![[Pasted image 20260119210501.png]]4.
![[Pasted image 20260119210621.png]]
5.
![[Pasted image 20260119211255.png]]
`HAL_I2C_Mem_Read`是 STM32 HAL 库中用于从 I2C 从设备指定内部寄存器 / 内存单元读取数据的核心函数，其原型包含 7 个参数，分别是指向已初始化的 I2C 句柄结构体指针`hi2c`、I2C 从设备原始 7 位 / 10 位地址`DevAddress`、从设备内部目标寄存器 / 内存地址`MemAddress`、指定地址长度的预定义宏（`I2C_MEMADD_SIZE_8BIT`/`I2C_MEMADD_SIZE_16BIT`）`MemAddSize`、指向足够大小接收数据缓冲区首地址的指针`pData`、要读取的数据字节数`Size`以及毫秒级超时时间`Timeout`，函数返回`HAL_StatusTypeDef`类型值用于判断通信是否成功。
6.互补滤波
![[Pasted image 20260120112708.png]]
7.
![[Pasted image 20260120123008.png]]
8.
![[Pasted image 20260120132625.png]]
9.
![[Pasted image 20260120132651.png]]
10.
![[Pasted image 20260120132741.png]]

11.配置RTOSdebug，并打印控制任务的频率，看是否符合要求
![[Pasted image 20260120140055.png]]
![[Pasted image 20260120140209.png]]

12.更新九轴陀螺仪和欧拉角计算的总时间

![[Pasted image 20260120141725.png]]
![[Pasted image 20260120141745.png]]
13.以后就可以用get_imu_data_time计算其他任务所用时间。






